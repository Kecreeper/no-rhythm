/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: No Rhythm
@author: Eduardo
@tags: []
@addedOn: 2024-00-00
*/

const player = "p"
const blackPixel = "b"
const yellowPixel = "y"

setLegend(
  [player, bitmap`
................
................
................
................
................
................
................
................
066..........6F0
066..........6F0
066..........6F0
0F66........6FF0
.0F66......66F0.
..0F6666666FF0..
...0FFFFFFFF0...
....00000000....`],
  [yellowPixel, bitmap`
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666`],
  [blackPixel, bitmap`
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000`]
)

const level = map`
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
.............................................................
p............................................................`
setMap(level)

function drawLineAlongY(x, y1, y2, pixel) {
  let yLength = y2 - y1 + 1

  for (i = 0; i < yLength; i++) {
    addSprite(x, y1+i, pixel)
  }
}

function drawLineAlongX(y, x1, x2, pixel) {
  let xLength = x2 - x1 + 1

  for (i = 0; i < xLength; i++) {
    addSprite(x1+i, y, pixel)
  }
}

function getLineofTilesAlongX(y, x1, x2) {
  let xLength = x2 - x1 + 1
  let lines = []
  for (i = 0; i < xLength; i++) {
    lines.push(getTile(x1+i, y)[0])
  }
  return lines
}

function getLineofTilesAlongY(x, y1, y2) {
  let yLength = y2 - y1 + 1
  let lines = []
  for (i = 0; i < yLength; i++) {
    lines.push(getTile(x, y1+i)[0])
  }
  return lines
}
  
function makeCircle(offsetX, offsetY, pixel) {
  // addSprite(33+offsetX, 29+offsetY, pixel)
  // addSprite(33+offsetX, 30+offsetY, pixel)
  // addSprite(33+offsetX, 31+offsetY, pixel)
  drawLineAlongY(33, 29, 31, pixel)
  addSprite(32+offsetX, 32+offsetY, pixel)
  addSprite(31+offsetX, 33+offsetY, pixel)
  addSprite(30+offsetX, 33+offsetY, pixel)
  addSprite(29+offsetX, 33+offsetY, pixel)
  addSprite(28+offsetX, 32+offsetY, pixel)
  addSprite(27+offsetX, 31+offsetY, pixel)
  addSprite(27+offsetX, 30+offsetY, pixel)
  addSprite(27+offsetX, 29+offsetY, pixel)
  addSprite(28+offsetX, 28+offsetY, pixel)
  addSprite(29+offsetX, 27+offsetY, pixel)
  addSprite(30+offsetX, 27+offsetY, pixel)
  addSprite(31+offsetX, 27+offsetY, pixel)
  addSprite(32+offsetX, 28+offsetY, pixel)

  let table1 = [
    getTile(32+offsetX, 32+offsetY)[0],
    getTile(31+offsetX, 33+offsetY)[0],
    getTile(30+offsetX, 33+offsetY)[0],
    getTile(29+offsetX, 33+offsetY)[0],
    getTile(28+offsetX, 32+offsetY)[0],
    getTile(27+offsetX, 31+offsetY)[0],
    getTile(27+offsetX, 30+offsetY)[0],
    getTile(27+offsetX, 29+offsetY)[0],
    getTile(28+offsetX, 28+offsetY)[0],
    getTile(29+offsetX, 27+offsetY)[0],
    getTile(30+offsetX, 27+offsetY)[0],
    getTile(31+offsetX, 27+offsetY)[0],
    getTile(32+offsetX, 28+offsetY)[0],
  ]

  let table2 = getLineofTilesAlongY(33, 29, 31)
  table1.concat(table2)

  return table1

  /*
  return yCircle = [
    // getTile(33+offsetX, 29+offsetY)[0],
    // getTile(33+offsetX, 30+offsetY)[0],
    // getTile(33+offsetX, 31+offsetY)[0],
    getTile(32+offsetX, 32+offsetY)[0],
    getTile(31+offsetX, 33+offsetY)[0],
    getTile(30+offsetX, 33+offsetY)[0],
    getTile(29+offsetX, 33+offsetY)[0],
    getTile(28+offsetX, 32+offsetY)[0],
    getTile(27+offsetX, 31+offsetY)[0],
    getTile(27+offsetX, 30+offsetY)[0],
    getTile(27+offsetX, 29+offsetY)[0],
    getTile(28+offsetX, 28+offsetY)[0],
    getTile(29+offsetX, 27+offsetY)[0],
    getTile(30+offsetX, 27+offsetY)[0],
    getTile(31+offsetX, 27+offsetY)[0],
    getTile(32+offsetX, 28+offsetY)[0],
  ]*/
}

let blackCircle = makeCircle(0, 0, blackPixel)
// let yellowCircle = makeCircle(0, -27, yellowPixel)

function moveRight(table, magnitude){
  for (let i = 0; i < table.length; i++){

    
    
    table[i].x += magnitude
  }
}

function moveLeft(table, magnitude){
  for (let i = 0; i < table.length; i++){
    table[i].x -= magnitude
  }
}

onInput("d", function(){
  moveRight(blackCircle, 1)
})

onInput("a", function(){
  moveLeft(blackCircle, 1)
})